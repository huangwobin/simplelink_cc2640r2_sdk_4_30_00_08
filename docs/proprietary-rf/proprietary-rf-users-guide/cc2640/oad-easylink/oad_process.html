

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Firmware update process &mdash; 
SimpleLink™ CC2640R2 SDK
Proprietary RF User&#39;s Guide
 2.70.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Image Metadata" href="oad_image_header.html" />
    <link rel="prev" title="Overview" href="oad_overview.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug cc2640 oad-easylink oad_process";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for TI beyond RTD Sphinx Theme --->
<div class="DocSite-globalNav tiNav">
    <ul>
    </ul>
</div>

<a class="DocSite-nav" href="https://www.ti.com" style="padding-bottom: 85px;">
  <img class="DocSiteNav-logo"
    src="../../_static/img/ti_logo.png"
    alt="TI Logo">
  <div class="DocSiteNav-title"></div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../proprietary-rf-guide/index-cc2640.html" class="icon icon-home" alt="Documentation Home"> 
SimpleLink™ CC2640R2 SDK
Proprietary RF User's Guide

          

          
          </a>

          
            
            
              <div class="version">
                2.70.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/quickstart-cc2640.html">Proprietary RF Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/index-platform-cc2640.html">The SimpleLink CC2640R2 SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/examples-cc2640.html">Examples User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/custom-hardware.html">Custom hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/tirtos-index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/nortos-index.html">noRTOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/rf-core-index.html">RF Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/proprietary-rf-index-cc2640.html">Proprietary Physical Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/easylink-index.html">EasyLink Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="oad.html">Over the Air Download (OAD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="oad_overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Firmware update process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#firmware-image-creation">Firmware image creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upload-to-the-oad-server-device">Upload to the OAD Server device</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution-of-the-firmware-image">Distribution of the firmware image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-validation-and-storage-on-the-oad-client">Image validation and storage on the OAD Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replacement-of-the-existing-firmware-by-the-bim">Replacement of the existing firmware by the BIM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="oad_image_header.html">Image Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="oad_offchip.html">Off-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="oad_onchip.html">On-Chip OAD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/migration-cc2640.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/reference-cc2640.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html">Terms and acronyms</a></li>
</ul>

            
          
          <!-- extra nav elements for TI beyond RTD Sphinx Theme --->
<div id="sideBanner">
    <br/>
    <br/><br/><br/>
</div>
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../proprietary-rf-guide/index-cc2640.html">
SimpleLink™ CC2640R2 SDK
Proprietary RF User's Guide
</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../proprietary-rf-guide/index-cc2640.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="oad.html">Over the Air Download (OAD)</a> &raquo;</li>
        
      <li>Firmware update process</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="firmware-update-process">
<span id="oad-process"></span><h1>Firmware update process<a class="headerlink" href="#firmware-update-process" title="Permalink to this headline">¶</a></h1>
<p>The OAD process consist of 2 main participants:</p>
<ul class="simple">
<li><a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-server"><span class="xref std std-term">OAD Server</span></a></li>
<li><a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a></li>
</ul>
<p>The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a> is usually the peripheral device that is being updated.
The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a> uses a <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-55"><span class="xref std std-term">Boot Image Manager (BIM)</span></a> to facilitate the
application of a new firmware update image. In addition, a host computer may
transfer a new firmware image to the server.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the device is connected to an external debugger when performing an OAD,
the device could potentially not reset properly after a successfull OAD.
This is a known issue, however, simply unplugging/replugging or hard reset
the device will make the device boot properly. Read more about this in
detail in Section <a class="reference internal" href="oad_overview.html#sec-oad-bim-hib"><span class="std std-ref">Halt In Boot (HIB)</span></a>.</p>
</div>
<p>The BIM on the client device runs on every device reset and determines if a
firmware update is to be applied. If no update is stored, then the BIM will
transfer program execution to the application image. The behavior of the BIM
is dependent upon the selected OAD type and further described in the
respective off-chip and on- chip sections below.</p>
<p>The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-server"><span class="xref std std-term">OAD Server</span></a> is usually the central device that is supplying the
firmware update image. <a class="reference internal" href="#fig-oad-server-and-client"><span class="std std-numref">Figure 76.</span></a> shows their
relationship.</p>
<div class="figure align-center" id="id3">
<span id="fig-oad-server-and-client"></span><img alt="../../_images/oad-easylink-topology.png" src="../../_images/oad-easylink-topology.png" />
<p class="caption"><span class="caption-number">Figure 76. </span><span class="caption-text"><a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-server"><span class="xref std std-term">OAD Server</span></a> and <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a></span></p>
</div>
<p>A complete OAD process consists of the following steps:</p>
<ol class="arabic simple">
<li>The host creates a new firmware image.</li>
<li>The host uploads the firmware image to the <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-server"><span class="xref std std-term">OAD Server</span></a>.</li>
<li>The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-server"><span class="xref std std-term">OAD Server</span></a> distributes the image to one or more <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a> devices.</li>
<li>The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a> validates the image and stores it at an intermediate location.</li>
<li>The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-55"><span class="xref std std-term">BIM</span></a> on the client device replaces the existing firmware image with the new image.</li>
</ol>
<p>These steps are explained more in detail throughout the following sections.
They are generic though. For detailed step-by-step instructions, have a look
at the example README files of the corresponding <a class="reference internal" href="oad_overview.html#oad-projects-overview"><span class="std std-ref">example
projects</span></a> in the <a class="reference external" href="http://www.ti.com/tool/SIMPLELINK-CC2640R2-SDK">SimpleLink CC2640R2 SDK</a>.</p>
<div class="section" id="firmware-image-creation">
<h2>Firmware image creation<a class="headerlink" href="#firmware-image-creation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>An updatable firmware is designed like a usual application, but with the
following differences:<ul>
<li>The OAD module needs to be included to process and store incoming firmware images.</li>
<li>A modified linker script is required to reserve room for the image header at the front
of the application.</li>
</ul>
</li>
<li>Once the image has been linked, metadata has to be computed and merged into the firmware
binary. This is done by a python script called <code class="docutils literal notranslate"><span class="pre">oad_image_tool.py</span></code>. It can be found in the
folder <code class="docutils literal notranslate"><span class="pre">&lt;SDK_INSTALL_FOLDER&gt;/tools/&lt;STACK&gt;/oad/</span></code>.</li>
</ol>
<p>This results in unified binary file containing a header with metadata and
followed by the firmware image.</p>
</div>
<div class="section" id="upload-to-the-oad-server-device">
<h2>Upload to the OAD Server device<a class="headerlink" href="#upload-to-the-oad-server-device" title="Permalink to this headline">¶</a></h2>
<p>The firmware image created in the previous step needs to be uploaded to the
OAD server device for further distribution. This step is application-specific.
New images might be delivered via a point-to-point connection or broadcasted
to all nodes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rfWsnConcentratorOadServer</span></code> example provides a UART terminal interface
that allows a firmware image to be uploaded on-the-fly to a
<code class="docutils literal notranslate"><span class="pre">rfWsnNodeOadClient</span></code>. This is done by a script <code class="docutils literal notranslate"><span class="pre">oad_write_bin.py</span></code> which
can be found in the  folder <code class="docutils literal notranslate"><span class="pre">&lt;SDK_INSTALL_FOLDER&gt;/tools/&lt;STACK&gt;/oad/</span></code>.</p>
</div>
<div class="section" id="distribution-of-the-firmware-image">
<h2>Distribution of the firmware image<a class="headerlink" href="#distribution-of-the-firmware-image" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-server"><span class="xref std std-term">OAD Server</span></a> distributes the image to one or more <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-oad-client"><span class="xref std std-term">OAD Client</span></a>
devices. This step is application-specific.</p>
</div>
<div class="section" id="image-validation-and-storage-on-the-oad-client">
<h2>Image validation and storage on the OAD Client<a class="headerlink" href="#image-validation-and-storage-on-the-oad-client" title="Permalink to this headline">¶</a></h2>
<p>The OAD client application will implement an ‘OAD State Machine’ for
performing the OAD and then store the image either to internal or external
flash. After succeeding, it performs a reboot of the device.</p>
</div>
<div class="section" id="replacement-of-the-existing-firmware-by-the-bim">
<h2>Replacement of the existing firmware by the BIM<a class="headerlink" href="#replacement-of-the-existing-firmware-by-the-bim" title="Permalink to this headline">¶</a></h2>
<p>For off-chip OAD, the <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-55"><span class="xref std std-term">BIM</span></a> needs to move a new firmware image from the
external flash into the internal one. For on-chip OAD, the <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc2640.html#term-55"><span class="xref std std-term">BIM</span></a> does
not replace any image.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="oad_image_header.html" class="btn btn-neutral float-right" title="Image Metadata" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="oad_overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">2016-2020, Texas Instruments</a>, Texas Instruments Incorporated. All rights reserved. <br>
        <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>