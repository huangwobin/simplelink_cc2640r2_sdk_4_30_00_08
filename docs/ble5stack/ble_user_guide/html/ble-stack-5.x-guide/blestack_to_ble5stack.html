

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Porting BLE-Stack to BLE5-Stack &mdash; 
SimpleLink™ CC2640R2 SDK
BLE5-Stack User&#39;s Guide
 1.01.11.00 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running Software Examples on CC2640R2L" href="../cc2640/software-on-cc2640r2l.html" />
    <link rel="prev" title="BLE5-Stack 1.00.01 to BLE5-Stack 1.01.00" href="ble5stack1.00.01-to-ble5stack1.01.00.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug ble-stack-5.x-guide blestack_to_ble5stack";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for TI beyond RTD Sphinx Theme --->
<div class="DocSite-globalNav tiNav">
    <ul>
    </ul>
</div>

<a class="DocSite-nav" href="https://www.ti.com" style="padding-bottom: 85px;">
  <img class="DocSiteNav-logo"
    src="../_static/img/ti_logo.png"
    alt="TI Logo">
  <div class="DocSiteNav-title"></div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index-cc2640.html" class="icon icon-home" alt="Documentation Home"> 
SimpleLink™ CC2640R2 SDK
BLE5-Stack User's Guide

          

          
          </a>

          
            
            
              <div class="version">
                1.01.11.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/ble5-quick-start-cc2640.html">TI BLE5-Stack Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="tirtos-index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ble-stack-5-index-cc2640.html">Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="ble-stack-5-index-cc2640.html#ble5-stack">BLE5-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="ble-stack-5-index-cc2640.html#developing-a-custom-application">Developing a Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="ble-stack-5-index-cc2640.html#running-the-sdk-on-custom-hardware">Running the SDK on Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../voice/voice.html">Creating a Voice Enabled Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging-index.html">Debugging</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="migration-cc2640.html">Updating from previous SDKs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="migration-cc2640.html#porting-guides">Porting Guides</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="migration-cc2640.html#migration-guides">Migration Guides</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Porting BLE-Stack to BLE5-Stack</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#porting-steps">Porting Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-translation-tables">API Translation Tables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cc2640/software-on-cc2640r2l.html">Running Software Examples on CC2640R2L</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-reference-cc2640.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-cc2640.html">Terms and Definitions</a></li>
</ul>

            
          
          <!-- extra nav elements for TI beyond RTD Sphinx Theme --->
<div id="sideBanner">
    <br/>
    <br/><br/><br/>
</div>
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index-cc2640.html">
SimpleLink™ CC2640R2 SDK
BLE5-Stack User's Guide
</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index-cc2640.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="migration-cc2640.html">Updating from previous SDKs</a> &raquo;</li>
        
      <li>Porting BLE-Stack to BLE5-Stack</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="porting-ble-stack-to-ble5-stack">
<span id="blestack-to-ble5stack"></span><h1>Porting BLE-Stack to BLE5-Stack<a class="headerlink" href="#porting-ble-stack-to-ble5-stack" title="Permalink to this headline">¶</a></h1>
<p>This section will describe how to port from a BLEStack project to a BLE5Stack
project.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example is specifically for CC2640R2 BLE-Stack 3.01.01/BLE5-Stack to
to CC26x2 BLE5-Stack 1.02.00 but the steps are similar for all cases. Individual
differences can be found in the relevant :ref:’Porting Guides’</p>
</div>
<p>This guide will describe a way to port a project from CC2640R2 SDK 1.50
(BLE-Stack 3.01.01)/SDK 1.40 (BLE5-Stack 1.00.01) to a CC26x2 SDK 2.10
(BLE5-Stack 1.02.00) BLE5-Stack 1.02.00 project. If your project is from
BLE-Stack 3.01.01, please note that this won’t show how to add BLE5 features.
However porting your project will allow the use of BLE5 features that are
contained in the BLE5-Stack 1.02.00.</p>
<p>See the following tables for API replacements:</p>
<ul>
<li><p class="first"><a class="reference internal" href="#sec-porting-translation-tables"><span class="std std-ref">API Translation Tables</span></a></p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#tbl-ble5-porting-gaprole-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP Changes</span></a></li>
<li><a class="reference internal" href="#tbl-ble5-porting-gapbondmgr-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP Bond Manager Changes</span></a></li>
<li><a class="reference internal" href="#tbl-ble5-porting-gapgattserver-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP GATT Server Changes</span></a></li>
<li><a class="reference internal" href="#tbl-ble5-porting-linkdb-changes-cc2640r2-to-cc26x2"><span class="std std-ref">Link Database Changes</span></a></li>
<li><a class="reference internal" href="#tbl-ble5-porting-sample-app-changes"><span class="std std-ref">Sample Simple Peripheral App Changes</span></a></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="section" id="porting-steps">
<h2>Porting Steps<a class="headerlink" href="#porting-steps" title="Permalink to this headline">¶</a></h2>
<p>To minimize project configuration differences, start with an example project in
the CC26x2 SDK 2.10 (BLE5-Stack 1.02.00). For example, if your base project
was <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> in BLE-Stack 3.01.01, use <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code>
in BLE5-Stack 1.02.00 as the project base to implement application-level
modifications on. In other words, no modifications will be made to the original
project. All application specific code will be inserted into the BLE5-Stack
1.02.00 project.</p>
<p>Some of these application-level modifications are due to various API changes.
To aid in this, the guide provides an API translation table:
<a class="reference internal" href="#tbl-ble5-porting-gaprole-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP Changes</span></a>.</p>
<p>Be sure to utilize the IDE and Tools recommended by the SDK’s release notes.
For API Descriptions see <a class="reference internal" href="api-reference-cc2640.html#ble-api-reference"><span class="std std-ref">BLE Stack API Reference</span></a>.
Additional information on this process can be found in the
<a class="reference external" href="http://processors.wiki.ti.com/index.php/CC13x2_CC26x2_Porting_Projects">CC26x2 Wiki Porting Page</a></p>
<ol class="arabic">
<li><p class="first">Choose a BLE5-Stack 1.02.00 example project and open it in the preferred
supported IDE</p>
<blockquote>
<div><p>We’re going to use <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> as the starting BLE5-Stack 1.02.00
sample project to provide context.</p>
</div></blockquote>
</li>
<li><p class="first">Transfer any additional app specific predefined symbols into the example
project</p>
<blockquote>
<div><p>The predefined symbols have moved from the project properties into the
project’s <code class="docutils literal notranslate"><span class="pre">Tools/defines</span></code> folder. Select the <code class="docutils literal notranslate"><span class="pre">.opt</span></code> file that is
relevant to the project’s current build configuration (Debug, Release, etc.).
The default build configuration selected is <code class="docutils literal notranslate"><span class="pre">Release</span></code>. Further information
about these configurations can be found in the README of the example project.</p>
</div></blockquote>
</li>
<li><p class="first">Transfer modified application files into the example project</p>
<blockquote>
<div><p>Modify <code class="docutils literal notranslate"><span class="pre">main.c</span></code> in the BLE5-Stack 1.02.00 example to create or rename any
tasks that were added or modified in the original project.
Note that <code class="docutils literal notranslate"><span class="pre">GAPRole_createTask()</span></code> should <strong>not</strong> be brought over to
<code class="docutils literal notranslate"><span class="pre">main.c</span></code>.</p>
<p>In this example, the following files from the original project were moved
into <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> BLE5-Stack 1.02.00 example:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">two_btn_menu.c</span></code> and <code class="docutils literal notranslate"><span class="pre">two_btn_menu.h</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code> and <code class="docutils literal notranslate"><span class="pre">simple_peripheral.h</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">simple_peripheral_menu.c</span></code> and <code class="docutils literal notranslate"><span class="pre">simple_peripheral_menu.h</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">simple_gatt_profile.c</span></code> and <code class="docutils literal notranslate"><span class="pre">simple_gatt_profile.h</span></code></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Adjust the Application for the GAP Role Removal</p>
<blockquote>
<div><p>All GAP Roles source and header files (<code class="docutils literal notranslate"><span class="pre">peripheral.c</span></code>, <code class="docutils literal notranslate"><span class="pre">peripheral.h</span></code>,
<code class="docutils literal notranslate"><span class="pre">central.c</span></code>, <code class="docutils literal notranslate"><span class="pre">central.h</span></code>, etc.) have been removed in BLE5-Stack 1.02.00.
These files will produce build errors and should not be included in your app.
This change will introduce a structure change in the application.</p>
<p>The functionality of the roles have been broken into distinct GAP functions:
Scanner, Advertiser, and Initiator.</p>
<p>These functions of GAP can be independently controlled to allow the device
to function as a desired GAP Role such as peripheral or central. For
additional information about using these roles, it is suggested to refer to
the <a class="reference internal" href="../ble-stack-5.x/gap.html#gap-roles"><span class="std std-ref">GAP Roles</span></a> section of the User Guide. If coming
from BLE-Stack 3.01.01, this section provides information about the legacy
features that exist in your current application.</p>
<p>Utilize the <a class="reference internal" href="#tbl-ble5-porting-gaprole-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP Changes</span></a> table to port
application GAP functionality. For example, in this table you’ll find
information such as <code class="docutils literal notranslate"><span class="pre">TGAP_LIM_DISC_ADV_INT_MIN</span></code> is now replaced with
<code class="docutils literal notranslate"><span class="pre">GAP_ADV_PARAM_PRIMARY_INTERVAL_MIN</span></code>, <code class="docutils literal notranslate"><span class="pre">GAPROLE_ADVERT_ENABLED</span></code> is
now done with <code class="docutils literal notranslate"><span class="pre">GapAdv_enable()</span></code> or that <code class="docutils literal notranslate"><span class="pre">GAPRole_StartDevice()</span></code> is
replaced by <code class="docutils literal notranslate"><span class="pre">GAP_DeviceInit()</span></code> to start the GAP module.</p>
<p>It is suggested to look at an existing example in the SDK, such as
<code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> or <code class="docutils literal notranslate"><span class="pre">simple_central</span></code>,
may need to be used to assist in the porting process of
the application. For example, the initialization of GAP Advertiser can be
found in <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code>.</p>
<p>After using the <a class="reference internal" href="#tbl-ble5-porting-gaprole-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP Changes</span></a> table and using
a relevant BLE5-Stack 1.02.00 SDK example project as a guide, such as
<code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code>, the structure and changes will become clearer.</p>
<p>In the context of <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> and using the rest of the guide,
the following table provides an example of changes to understand and
implement when porting:
<a class="reference internal" href="#tbl-ble5-porting-sample-app-changes"><span class="std std-ref">Sample Simple Peripheral App Changes</span></a>.</p>
</div></blockquote>
</li>
<li><p class="first">Adjust the Application for the GAP Bond Manager Changes</p>
<blockquote>
<div><p>During the removal of GAP Roles source files, functionality relating to
specific roles was moved into GAP Bond Manager. One particular change is
the handling of passcodes. These are now handled via call back -
see <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> or <code class="docutils literal notranslate"><span class="pre">simple_central</span></code> for implementation details
(search for <code class="docutils literal notranslate"><span class="pre">passcodeCb</span></code>).</p>
<p>See <a class="reference internal" href="#tbl-ble5-porting-gapbondmgr-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP Bond Manager Changes</span></a> for additional changes.</p>
<ol class="arabic">
<li><p class="first">Include <code class="docutils literal notranslate"><span class="pre">icall_ble_api.h</span></code> if Stack/ICall APIs are used. Add the following
#include <strong>AFTER</strong> all other includes for source files using Stack/ICall
APIs.</p>
<blockquote>
<div><p>In this example, add:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;icall_ble_api.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>into the following files <strong>AFTER</strong> all other includes. In for the
<code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> port, add this into these files:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">simple_gatt_profile.c</span></code></li>
</ul>
</div></blockquote>
<p>For more information regarding <code class="docutils literal notranslate"><span class="pre">icall_ble_api.h</span></code> see
<a class="reference internal" href="../ble-stack-5.x/the-application.html#sec-the-application-icall-lite"><span class="std std-ref">ICall Translation and Include</span></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">All Stack/ICall APIs are listed in <code class="docutils literal notranslate"><span class="pre">icall_ble_api.h</span></code>. If any APIs are
used without <code class="docutils literal notranslate"><span class="pre">icall_ble_api.h</span></code>, build and or link errors may occur with
erratic runtime behaviors!</p>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
<li><p class="first">Replace GAP Event processing</p>
<blockquote>
<div><p>In addition to the GAP Role changes, GAP events are being handled
differently. This used to be received by GAP Role
(ie. <strong>SimpleBLEPeripheral_processStateChangeEvt</strong>), which would then call
GAPBondMgr, and then translate the event to GAPRole specific events and
pass it to the application through a callback
(ie. <strong>SimpleBLEPeripheral_gapRoleCBs</strong>).</p>
<p>GAP events are now returned to the application directly as RTOS events.
If the GAPBondMgr is present, they will first be received by the GAPBondMgr
to do some processing but it will still be received the same in the
application. This is now configured with <code class="docutils literal notranslate"><span class="pre">GAP_DeviceInit</span></code>. GAP
events are received by the application (when the bond manager exists) as
stack messages of type <code class="docutils literal notranslate"><span class="pre">GAP_MSG_EVENT</span></code>.</p>
<p>See the example for <code class="docutils literal notranslate"><span class="pre">simple_peripheral</span></code> from BLE5-Stack 1.02.00
in the snippets below:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-number">Listing 124. </span><span class="caption-text">Register to receive GAP events</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Address mode of the local device</span>
<span class="cp">#define DEFAULT_ADDRESS_MODE                  ADDRMODE_PUBLIC</span>
<span class="c1">//...</span>

<span class="c1">// Entity ID globally used to check for source and/or destination of messages</span>
<span class="k">static</span> <span class="n">ICall_EntityID</span> <span class="n">selfEntity</span><span class="p">;</span>
<span class="c1">//...</span>

<span class="c1">// Event globally used to post local events and pend on system and</span>
<span class="c1">// local events.</span>
<span class="k">static</span> <span class="n">ICall_SyncHandle</span> <span class="n">syncEvent</span><span class="p">;</span>
<span class="c1">//...</span>

<span class="c1">// Address mode</span>
<span class="k">static</span> <span class="n">GAP_Addr_Modes_t</span> <span class="n">addrMode</span> <span class="o">=</span> <span class="n">DEFAULT_ADDRESS_MODE</span><span class="p">;</span>
<span class="c1">//...</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">SimplePeripheral_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Register the current thread as an ICall dispatcher application</span>
    <span class="c1">// so that the application can send and receive messages.</span>
    <span class="n">ICall_registerApp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">selfEntity</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">syncEvent</span><span class="p">);</span>

    <span class="c1">//...</span>

    <span class="c1">//Initialize GAP layer for Peripheral role, pass taskID and register to receive GAP events</span>
    <span class="n">GAP_DeviceInit</span><span class="p">(</span><span class="n">GAP_PROFILE_PERIPHERAL</span><span class="p">,</span> <span class="n">selfEntity</span><span class="p">,</span> <span class="n">addrMode</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-number">Listing 125. </span><span class="caption-text">Receiving GAP Events</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="k">static</span> <span class="kt">void</span> <span class="nf">SimplePeripheral_processGapMessage</span><span class="p">(</span><span class="n">gapEventHdr_t</span> <span class="o">*</span><span class="n">pMsg</span><span class="p">);</span> <span class="c1">// function definition to handle GAP messages</span>
</span>
<span class="k">static</span> <span class="kt">uint8_t</span> <span class="nf">SimplePeripheral_processStackMsg</span><span class="p">(</span><span class="n">ICall_Hdr</span> <span class="o">*</span><span class="n">pMsg</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Always dealloc pMsg unless set otherwise</span>
  <span class="kt">uint8_t</span> <span class="n">safeToDealloc</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>

  <span class="k">switch</span> <span class="p">(</span><span class="n">pMsg</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">)</span>
  <span class="p">{</span>
<span class="hll">    <span class="k">case</span> <span class="nl">GAP_MSG_EVENT</span><span class="p">:</span>
</span><span class="hll">      <span class="n">SimplePeripheral_processGapMessage</span><span class="p">((</span><span class="n">gapEventHdr_t</span><span class="o">*</span><span class="p">)</span> <span class="n">pMsg</span><span class="p">);</span>
</span><span class="hll">      <span class="k">break</span><span class="p">;</span>
</span>    <span class="c1">//...</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//...</span>
<span class="hll"><span class="k">static</span> <span class="kt">void</span> <span class="nf">SimplePeripheral_processGapMessage</span><span class="p">(</span><span class="n">gapEventHdr_t</span> <span class="o">*</span><span class="n">pMsg</span><span class="p">)</span>
</span><span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">pMsg</span><span class="o">-&gt;</span><span class="n">opcode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="nl">GAP_DEVICE_INIT_DONE_EVENT</span><span class="p">:</span>
        <span class="p">{</span>
        <span class="c1">//... etc.</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p class="first">Adjust the Application for the GATT Profile Changes</p>
<blockquote>
<div><p>Due to changes in LinkDB defines (<code class="docutils literal notranslate"><span class="pre">linkdb.h</span></code>), custom GATT profiles
may need to be modified in order to account for the new definitions.</p>
<p>Prepend <code class="docutils literal notranslate"><span class="pre">LINKDB_</span></code> to all constants starting with <code class="docutils literal notranslate"><span class="pre">CONNHANDLE_</span></code>, for example in <code class="docutils literal notranslate"><span class="pre">simple_gatt_profile.c</span></code>:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Initialize Client Characteristic Configuration attributes</span>
<span class="n">GATTServApp_InitCharCfg</span><span class="p">(</span> <span class="n">LINKDB_CONNHANDLE_INVALID</span><span class="p">,</span> <span class="n">simpleProfileChar4Config</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>See <a class="reference internal" href="#tbl-ble5-porting-gapgattserver-changes-cc2640r2-to-cc26x2"><span class="std std-ref">GAP GATT Server Changes</span></a> and
<a class="reference internal" href="#tbl-ble5-porting-linkdb-changes-cc2640r2-to-cc26x2"><span class="std std-ref">Link Database Changes</span></a> for additional changes as required.</p>
</div></blockquote>
</li>
<li><p class="first">Note that additional return parameters have been added to <code class="docutils literal notranslate"><span class="pre">HCI_EXT_ConnEventNoticeCmd()</span></code>:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Report describing connection event Returned via a @ref pfnGapConnEvtCB_t.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
  <span class="n">GAP_ConnEvtStat_t</span>     <span class="n">status</span><span class="p">;</span>   <span class="c1">//!&lt; status of connection event</span>
  <span class="kt">uint16_t</span>              <span class="n">handle</span><span class="p">;</span>   <span class="c1">//!&lt; connection handle</span>
  <span class="kt">uint8_t</span>               <span class="n">channel</span><span class="p">;</span>  <span class="c1">//!&lt; BLE RF channel index (0-39)</span>
  <span class="n">GAP_ConnEvtPhy_t</span>      <span class="n">phy</span><span class="p">;</span>      <span class="c1">//!&lt; PHY of connection event</span>
  <span class="kt">int8_t</span>                <span class="n">lastRssi</span><span class="p">;</span> <span class="c1">//!&lt; RSSI of last packet received</span>
  <span class="c1">/// Number of packets received for this connection event</span>
  <span class="kt">uint16_t</span>              <span class="n">packets</span><span class="p">;</span>
  <span class="c1">/// Total number of CRC errors for the entire connection</span>
  <span class="kt">uint16_t</span>              <span class="n">errors</span><span class="p">;</span>
  <span class="c1">/// Type of next BLE task</span>
  <span class="n">GAP_ConnEvtTaskType_t</span> <span class="n">nextTaskType</span><span class="p">;</span>
  <span class="c1">/// Time to next BLE task (in us). 0xFFFFFFFF if there is no next task.</span>
  <span class="kt">uint32_t</span>              <span class="n">nextTaskTime</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Gap_ConnEventRpt_t</span><span class="p">;</span>

<span class="cm">/** @} End GAP_Structs */</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Note that additional parameter (signalIdentifier) has been added to GAP_UpdateLinkParamReq:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Establish Link Request parameters</span>
<span class="cm"> *</span>
<span class="cm"> * This is used by @ref GAP_UpdateLinkParamReq</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
  <span class="kt">uint16_t</span> <span class="n">connectionHandle</span><span class="p">;</span> <span class="c1">//!&lt; Connection handle of the update</span>
  <span class="kt">uint16_t</span> <span class="n">intervalMin</span><span class="p">;</span>      <span class="c1">//!&lt; Minimum Connection Interval</span>
  <span class="kt">uint16_t</span> <span class="n">intervalMax</span><span class="p">;</span>      <span class="c1">//!&lt; Maximum Connection Interval</span>
  <span class="kt">uint16_t</span> <span class="n">connLatency</span><span class="p">;</span>      <span class="c1">//!&lt; Connection Latency</span>
  <span class="kt">uint16_t</span> <span class="n">connTimeout</span><span class="p">;</span>      <span class="c1">//!&lt; Connection Timeout</span>
  <span class="kt">uint8_t</span>  <span class="n">signalIdentifier</span><span class="p">;</span> <span class="c1">//!&lt; L2CAP Signal Identifier. Must be 0 for LL Update</span>
<span class="p">}</span> <span class="n">gapUpdateLinkParamReq_t</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">HCI_EXT_ConnEventNoticeCmd()</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">Gap_RegisterConnEventCb()</span></code>. See <code class="docutils literal notranslate"><span class="pre">gap.h</span></code> for the API description.</p>
</li>
</ol>
</div>
<div class="section" id="api-translation-tables">
<span id="sec-porting-translation-tables"></span><h2>API Translation Tables<a class="headerlink" href="#api-translation-tables" title="Permalink to this headline">¶</a></h2>
<p>These tables describe BLE5Stack API replacements for BLEStack API’s.</p>
<span id="tbl-ble5-porting-gaprole-changes-cc2640r2-to-cc26x2"></span><table border="1" class="docutils" id="id4">
<caption><span class="caption-number">Table 22. </span><span class="caption-text">GAP Changes</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="7%" />
<col width="27%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Previous Implementation</th>
<th class="head">New/Current implementation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Type</td>
<td>Name</td>
<td>Description / API / Parameter</td>
</tr>
<tr class="row-odd"><td>GAP EVENT</td>
<td>GAP_ADV_DATA_UPDATE_DONE_EVENT</td>
<td>Check return status of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga1bbb75a51200d38ed8f760d274c8b8c0">GapAdv_loadByHandle()</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gace138d1c3a9257893543e47f8774fdb9">GapAdv_loadByBuffer()</a></td>
</tr>
<tr class="row-even"><td>GAP EVENT</td>
<td>GAP_DEVICE_DISCOVERY_EVENT</td>
<td><dl class="first last docutils">
<dt>This depends on how the scanner is configured but one or more of the following events will be received:</dt>
<dd><a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#ga5f4bfc1431117cba4d13330440388a69">GAP_EVT_SCAN_DISABLED</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#ga3b3792598fdc62898e7662f2374107bb">GAP_EVT_SCAN_PRD_ENDED</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#ga314e4eac0c9566c1985a03e6dc32bb70">GAP_EVT_SCAN_REQ_RECEIVED</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#ga5824fb23860cc1f00efb6406bf6cdb38">GAP_EVT_SCAN_INT_ENDED</a></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>GAP EVENT</td>
<td>GAP_DEVICE_INFO_EVENT</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#ga9dd52f37113be5557e3b2fe5d6612a69">GAP_EVT_ADV_REPORT</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#gac19d39aa05b28231fe8cdf446969dd37">GAP_EVT_ADV_REPORT_FULL</a></td>
</tr>
<tr class="row-even"><td>GAP EVENT</td>
<td>GAP_END_DISCOVERABLE_DONE_EVENT</td>
<td>Check return status of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga4e45550a6887067a26b8cc797e3d51fe">GapAdv_disable()</a> to see that advertising is successfully being cancelled.
The <a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#gaa3e11b06e1376b7e8e3f92a4a2f47c09">GAP_EVT_ADV_END_AFTER_DISABLE</a> will be sent after the last advertisement ends.</td>
</tr>
<tr class="row-odd"><td>GAP EVENT</td>
<td>GAP_MAKE_DISCOVERABLE_DONE_EVENT</td>
<td>Check return status of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a> to see that advertising is successfully being started.
The <a class="reference external" href="../../doxygen/ble/html/group___gap_adv_scan___event___i_ds.html#ga9b918124538257a0c31e6ea5e24c34b4">GAP_EVT_ADV_START_AFTER_ENABLE</a> will be sent after the first advertisement starts.</td>
</tr>
<tr class="row-even"><td>GAP EVENT</td>
<td>GAP_RANDOM_ADDR_CHANGED_EVENT</td>
<td>Obsolete - Address Resolution is done controller</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_ADV_MIN</td>
<td>Configured by durationOrMaxEvents parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_LIM_ADV_TIMEOUT</td>
<td>Configured by durationOrMaxEvents parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_SCAN</td>
<td>Configured by parameters of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga60e22e486791087008affa3e9054c0a9">GapScan_enable()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_SCAN</td>
<td>Configured by parameters of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga60e22e486791087008affa3e9054c0a9">GapScan_enable()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_SCAN_INT</td>
<td>Configured by interval parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_SCAN_WIND</td>
<td>Configured by window parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_SCAN_INT</td>
<td>Configured by interval parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_SCAN_WIND</td>
<td>Configured by window parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_ADV_TIMEOUT</td>
<td>Configured by durationOrMaxEvents parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_PARAM_TIMEOUT</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38aea05b920f1fef179e4c0f9385a345056">GAP_PARAM_CONN_PARAM_TIMEOUT</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_ADV_INT_MIN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa70e48f6d64e39e15360b854892163716">GAP_ADV_PARAM_PRIMARY_INTERVAL_MIN</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_ADV_INT_MAX</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa27bc46d1fbcc99ce9ed00d9b6ec47dca">GAP_ADV_PARAM_PRIMARY_INTERVAL_MAX</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_ADV_INT_MIN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa70e48f6d64e39e15360b854892163716">GAP_ADV_PARAM_PRIMARY_INTERVAL_MIN</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_ADV_INT_MAX</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa27bc46d1fbcc99ce9ed00d9b6ec47dca">GAP_ADV_PARAM_PRIMARY_INTERVAL_MAX</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_ADV_INT_MIN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa70e48f6d64e39e15360b854892163716">GAP_ADV_PARAM_PRIMARY_INTERVAL_MIN</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_ADV_INT_MAX</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa27bc46d1fbcc99ce9ed00d9b6ec47dca">GAP_ADV_PARAM_PRIMARY_INTERVAL_MAX</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_SCAN_INT</td>
<td>Configured by interval parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_SCAN_WIND</td>
<td>Configured by window parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_HIGH_SCAN_INT</td>
<td>Configured by interval parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_HIGH_SCAN_WIND</td>
<td>Configured by window parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_SCAN_INT</td>
<td>Configured by interval parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_GEN_DISC_SCAN_WIND</td>
<td>Configured by window parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_SCAN_INT</td>
<td>Configured by interval parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_LIM_DISC_SCAN_WIND</td>
<td>Configured by window parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga91e950a09e7bb42aca94de5825955144">GapScan_setPhyParams()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_INT_MIN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga0f177b422346f91e33327b795324d611">GapInit_setPhyParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_init___params.html#ggac3e8401397e1008558c8db3def6412dda5d7949b6c095531435009be5759c058d">INIT_PHYPARAM_CONN_INT_MIN</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_INT_MAX</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga0f177b422346f91e33327b795324d611">GapInit_setPhyParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_init___params.html#ggac3e8401397e1008558c8db3def6412dda6a81302c90ad76e729dcc1013a6f2b05">INIT_PHYPARAM_CONN_INT_MAX</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_SCAN_INT</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga0f177b422346f91e33327b795324d611">GapInit_setPhyParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_init___params.html#ggac3e8401397e1008558c8db3def6412dda269a65de086b6fc242f4e8848e0a59c1">INIT_PHYPARAM_SCAN_INTERVAL</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_SCAN_WIND</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga0f177b422346f91e33327b795324d611">GapInit_setPhyParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_init___params.html#ggac3e8401397e1008558c8db3def6412dda5b1ebcd3720793e29168ea0f6000d2e4">INIT_PHYPARAM_SCAN_WINDOW</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_SUPERV_TIMEOUT</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga0f177b422346f91e33327b795324d611">GapInit_setPhyParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_init___params.html#ggac3e8401397e1008558c8db3def6412dda3b18583b740f8bf314533263f1f97aeb">INIT_PHYPARAM_SUP_TIMEOUT</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_LATENCY</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga0f177b422346f91e33327b795324d611">GapInit_setPhyParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_init___params.html#ggac3e8401397e1008558c8db3def6412dda1cc8f466f6b0520940b7f2ad179842e8">INIT_PHYPARAM_CONN_LATENCY</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_MIN_CE_LEN</td>
<td>Obsolete - Not Used by Controller</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_EST_MAX_CE_LEN</td>
<td>Obsolete - Not Used by Controller</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_PRIVATE_ADDR_INT</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38ab337d8055e0d3d4b34f4d1efa8160aad">GAP_PARAM_PRIVATE_ADDR_INT</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_CONN_PAUSE_CENTRAL</td>
<td>Obsolete - Not Used by Controller</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_CONN_PAUSE_PERIPHERAL</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_SM_TIMEOUT</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38a62065759c379636e65fafd4f87ebdb01">GAP_PARAM_SM_TIMEOUT</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_SM_MIN_KEY_LEN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38aee94f8781409d89f681fc6e43a88dc27">GAP_PARAM_SM_MIN_KEY_LEN</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_SM_MAX_KEY_LEN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38aa7fb2b872a999c9b3dfd9a6345ed40d8">GAP_PARAM_SM_MAX_KEY_LEN</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_FILTER_ADV_REPORTS</td>
<td>Obsolete - Duplicate Filtering done in Controller</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_SCAN_RSP_RSSI_MIN</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#gaea670f68167c414703dc53a687f451d5">GapScan_setParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_scan___params.html#gga0ddb2a0f5c2ed1663478732f4836dacba48f59e808b2cec440ee2f364875ac13b">SCAN_PARAM_FLT_MIN_RSSI</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_REJECT_CONN_PARAMS</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38a3cfae7911ef33cc29782430c27d0e967">GAP_PARAM_LINK_UPDATE_DECISION</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_AUTH_TASK_ID</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <code class="docutils literal notranslate"><span class="pre">GAP_PARAM_AUTH_TASK_ID</span></code></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>TGAP_VERIFY_CAR</td>
<td>DEPRECATED</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>TGAP_GGS_PARAMS</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <code class="docutils literal notranslate"><span class="pre">GAP_PARAM_GGS_PARAMS</span></code></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_IRK,
GAPCENTRALROLE_IRK</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#ga9339519e357fc3272d7c1acb1034417d">GapConfig_SetParameter()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#gga7f88123d7eedc652022788e7b6d0682fa5262747b071dc2890683e491ce0d7097">GAP_CONFIG_PARAM_IRK</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_SRK,
GAPCENTRALROLE_SRK</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#ga9339519e357fc3272d7c1acb1034417d">GapConfig_SetParameter()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#gga7f88123d7eedc652022788e7b6d0682fa5a489e46e912553833208f2a7348d911">GAP_CONFIG_PARAM_SRK</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_BD_ADDR,
GAPCENTRALROLE_BD_ADDR</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___h_c_i.html#gac92bf295ab302f25d70d88105a12b3e9">HCI_ReadBDADDRCmd()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_ADVERT_ENABLED,
GAPROLE_ADV_NONCONN_ENABLED</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a> and <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga4e45550a6887067a26b8cc797e3d51fe">GapAdv_disable()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_ADVERT_OFF_TIME</td>
<td>Configured by durationOrMaxEvents parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_ADVERT_DATA</td>
<td><dl class="first last docutils">
<dt>Various API:</dt>
<dd><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gace138d1c3a9257893543e47f8774fdb9">GapAdv_loadByBuffer()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga1bbb75a51200d38ed8f760d274c8b8c0">GapAdv_loadByHandle()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga2d97eeb71e379410e0f6f48c7c1eece7">GapAdv_prepareLoadByBuffer()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gae783d648cb49d7aa764cd97d366de812">GapAdv_prepareLoadByHandle()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga3a6474a27ff9f32293698d34943e5085">GapAdv_getBuffer()</a></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_SCAN_RSP_DATA</td>
<td><dl class="first last docutils">
<dt>Various API:</dt>
<dd><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gace138d1c3a9257893543e47f8774fdb9">GapAdv_loadByBuffer()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga1bbb75a51200d38ed8f760d274c8b8c0">GapAdv_loadByHandle()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga2d97eeb71e379410e0f6f48c7c1eece7">GapAdv_prepareLoadByBuffer()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gae783d648cb49d7aa764cd97d366de812">GapAdv_prepareLoadByHandle()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga3a6474a27ff9f32293698d34943e5085">GapAdv_getBuffer()</a></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_ADV_EVENT_TYPE</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga5d73e17d3c353632a305f4de4d81e97f">GapAdv_getParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aaee9cd853f91a5219554748068efeded1">GAP_ADV_PARAM_PROPS</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_ADV_DIRECT_TYPE</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga5d73e17d3c353632a305f4de4d81e97f">GapAdv_getParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aaca9f6c76bf6170cc20a248e39d0dace3">GAP_ADV_PARAM_PEER_ADDRESS_TYPE</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_ADV_DIRECT_ADDR</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga5d73e17d3c353632a305f4de4d81e97f">GapAdv_getParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa6a894fddde6054a3d590efa36cfbfb94">GAP_ADV_PARAM_PEER_ADDRESS</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_ADV_CHANNEL_MAP</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga5d73e17d3c353632a305f4de4d81e97f">GapAdv_getParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aaafd978215f900bd05c50f9b2e0cacc3f">GAP_ADV_PARAM_PRIMARY_CHANNEL_MAP</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_ADV_FILTER_POLICY</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a> or <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga5d73e17d3c353632a305f4de4d81e97f">GapAdv_getParam()</a> with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aad979714bf19838f61230e34ecc84b122">GAP_ADV_PARAM_FILTER_POLICY</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_CONNHANDLE</td>
<td>Returned for each GAP event</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_RSSI_READ_RATE</td>
<td>RSSI can be received by <a class="reference external" href="../../doxygen/ble/html/group___h_c_i.html#ga19d1f14a0fde7b049a92f46e96671b40">HCI_ReadRssiCmd()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_PARAM_UPDATE_ENABLE</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a> can be called as desired</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_MIN_CONN_INTERVAL</td>
<td>pParams.intervalMin parameter of <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_MAX_CONN_INTERVAL</td>
<td>pParams.intervalMax parameter of <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_SLAVE_LATENCY</td>
<td>pParams.connLatency parameter of <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_TIMEOUT_MULTIPLIER</td>
<td>pParams.connTimeout parameter of <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_STATE</td>
<td>Obsolete - GAP changes remove the need for this</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_CONN_BD_ADDR,
GAPROLE_BD_ADDR_TYPE</td>
<td><p class="first">Returned in <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___event___i_ds.html#gaca4a8fae9ea113d4240002a1f9853d15">GAP_LINK_ESTABLISHED_EVENT</a>,
contained in stack message, <a class="reference external" href="../../doxygen/ble/html/structgap_est_link_req_event__t.html">gapEstLinkReqEvent_t</a> when the link is established</p>
<p class="last">Or use <a class="reference external" href="../../doxygen/ble/html/group___link_d_b.html#gaba6065b7e695aebc1d7ff177cd920e61">linkDB_GetInfo()</a> at any time during the connection</p>
</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_CONN_INTERVAL</td>
<td>Returned from <a class="reference external" href="../../doxygen/ble/html/group___link_d_b.html#gaba6065b7e695aebc1d7ff177cd920e61">linkDB_GetInfo()</a>, as linkDBInfo_t.connInterval</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPROLE_CONN_LATENCY</td>
<td>Returned from <a class="reference external" href="../../doxygen/ble/html/group___link_d_b.html#gaba6065b7e695aebc1d7ff177cd920e61">linkDB_GetInfo()</a>, as linkDBInfo_t.connLatency</td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPROLE_CONN_TIMEOUT</td>
<td>Returned from <a class="reference external" href="../../doxygen/ble/html/group___link_d_b.html#gaba6065b7e695aebc1d7ff177cd920e61">linkDB_GetInfo()</a>, as linkDBInfo_t.connTimeout</td>
</tr>
<tr class="row-odd"><td>GAP PARAM</td>
<td>GAPCENTRALROLE_MAX_SCAN_RES</td>
<td>Configured by maxNumReport parameter of <a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga60e22e486791087008affa3e9054c0a9">GapScan_enable()</a></td>
</tr>
<tr class="row-even"><td>GAP PARAM</td>
<td>GAPCENTRALROLE_LINK_PARAM_UPDATE_REQ_REPLY</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaefeda1d26837a7703c884939c5c8f749">GAP_SetParamValue()</a> with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___params.html#ggad3fe20690fa942f702d9009944fe4d38a3cfae7911ef33cc29782430c27d0e967">GAP_PARAM_LINK_UPDATE_DECISION</a></td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_DeviceInit,
GAPRole_StartDevice,
GAPCentralRole_StartDevice</td>
<td><dl class="first last docutils">
<dt>Declaration Change -  Use <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gabd7c5f3cc85470854cf425e7e49b5ca5">GAP_DeviceInit()</a> with parameter for roles desired</dt>
<dd><dl class="first last docutils">
<dt>See <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___profile___roles.html#gaa07c8c4b70f12e2b3fecc5b8b73bc73c">GAP_PROFILE_BROADCASTER</a></dt>
<dd><a class="reference external" href="../../doxygen/ble/html/group___g_a_p___profile___roles.html#ga8b17c3ba71f665ab07ec64850fef7e17">GAP_PROFILE_OBSERVER</a>
<a class="reference external" href="../../doxygen/ble/html/group___g_a_p___profile___roles.html#gabbdb1de088df13187024904084577931">GAP_PROFILE_PERIPHERAL</a>
<a class="reference external" href="../../doxygen/ble/html/group___g_a_p___profile___roles.html#ga38ae0f5e0f4bf18505951a38692be30e">GAP_PROFILE_CENTRAL</a></dd>
</dl>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAPRole_RegisterAppCBs</td>
<td>Obsolete - Functionality moved to <a class="reference external" href="../../doxygen/ble/html/group___g_a_p_bond_mgr.html#ga6f8ee9b4906eeb74ae8f10d511229eda">GAPBondMgr_Register()</a></td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_SetAdvToken</td>
<td>Obsolete - Advertisement Sets are Used</td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_GetAdvToken</td>
<td>Obsolete - Advertisement Sets are Used</td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_RemoveAdvToken</td>
<td>Obsolete - Advertisement Sets are Used</td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_UpdateAdvTokens</td>
<td>Obsolete - Advertisement Sets are Used</td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAPRole_SendUpdateParam,
GAPCentralRole_UpdateLink</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_MakeDiscoverable</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a></td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_UpdateAdvertisingData</td>
<td><dl class="first last docutils">
<dt>Various API:</dt>
<dd><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gace138d1c3a9257893543e47f8774fdb9">GapAdv_loadByBuffer()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga1bbb75a51200d38ed8f760d274c8b8c0">GapAdv_loadByHandle()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga2d97eeb71e379410e0f6f48c7c1eece7">GapAdv_prepareLoadByBuffer()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#gae783d648cb49d7aa764cd97d366de812">GapAdv_prepareLoadByHandle()</a>
<a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga3a6474a27ff9f32293698d34943e5085">GapAdv_getBuffer()</a></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_EndDiscoverable</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga4e45550a6887067a26b8cc797e3d51fe">GapAdv_disable()</a></td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_DeviceDiscoveryRequest,
GAPCentralRole_StartDiscovery</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#ga60e22e486791087008affa3e9054c0a9">GapScan_enable()</a></td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_DeviceDiscoveryCancel,
GAPCentralRole_CancelDiscovery</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_scan.html#gac68c4fba007904dd8d7c3621970d9bef">GapScan_disable()</a></td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_ResolvePrivateAddr</td>
<td>Obsolete - Address Resolution is done controller</td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_EstablishLinkReq,
GAPCentralRole_EstablishLink</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#gac48c7e153d960604f9da90aca3f75d08">GapInit_connect()</a>, or <a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#ga51177eb45aa3d7e32807166b0aceffa6">GapInit_connectWl()</a> to use whitelist</td>
</tr>
<tr class="row-odd"><td>GAP API</td>
<td>GAP_TerminateLinkReq,
GAPRole_TerminateConnection,
GAPCentralRole_TerminateLink</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_init.html#gab6106f8ac76d6991ad0fbf53b883e278">GapInit_cancelConnect()</a> for connection request, <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#ga7e7d184cdce75306919cd660ccab3b3b">GAP_TerminateLinkReq()</a> otherwise</td>
</tr>
<tr class="row-even"><td>GAP API</td>
<td>GAP_ConfigDeviceAddr</td>
<td>Obsolete - Only way to configure the device address is as parameters in <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gabd7c5f3cc85470854cf425e7e49b5ca5">GAP_DeviceInit()</a></td>
</tr>
<tr class="row-odd"><td>GAP CB</td>
<td>gapRolesParamUpdateCB_t,
paramUpdateAppDecision_t,
passThroughToApp_t</td>
<td>These are handled through <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___event___i_ds.html#gaede323cf41e04ee0fec404461a47ce17">GAP_UPDATE_LINK_PARAM_REQ_EVENT</a>,
applies to the L2CAP Parameter Update Procedure as well.</td>
</tr>
<tr class="row-even"><td>GAP CB</td>
<td>gapRolesStateNotify_t,
pfnGapCentralRoleEventCB_t</td>
<td>Moved into GAP Bond Manager callbacks, <a class="reference external" href="../../doxygen/ble/html/structgap_bond_c_bs__t.html">gapBondCBs_t</a></td>
</tr>
</tbody>
</table>
<span id="tbl-ble5-porting-gapbondmgr-changes-cc2640r2-to-cc26x2"></span><table border="1" class="docutils" id="id5">
<caption><span class="caption-number">Table 23. </span><span class="caption-text">GAP Bond Manager Changes</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="17%" />
<col width="35%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Previous Implementation</th>
<th class="head">New/Current implementation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Type</td>
<td>Name</td>
<td>Description / API / Parameter</td>
</tr>
<tr class="row-odd"><td>GAPBOND PARAM</td>
<td>GAPBOND_DEFAULT_PASSCODE</td>
<td>Use <a class="reference external" href="../../doxygen/ble/html/group___g_a_p_bond_mgr___c_bs.html#ga0bce1fb086c4724f9447778cda3abda4">pfnPasscodeCB_t</a>,
shared default passcode defined in bcomdef.h
<a class="reference external" href="../../doxygen/ble/html/bcomdef_8h.html#a0da7af8bf24c0c6d0b23b2a36d13f53d">B_APP_DEFAULT_PASSCODE</a></td>
</tr>
<tr class="row-even"><td>GAPBOND PARAM</td>
<td>GAPBOND_REMOTE_OOB_SC_ENABLED</td>
<td>Obsolete</td>
</tr>
<tr class="row-odd"><td>GAPBOND PARAM</td>
<td>GAPBOND_REMOTE_OOB_SC_DATA</td>
<td>Obsolete</td>
</tr>
<tr class="row-even"><td>GAPBOND PARAM</td>
<td>GAPBOND_LOCAL_OOB_SC_ENABLED</td>
<td>Obsolete</td>
</tr>
<tr class="row-odd"><td>GAPBOND PARAM</td>
<td>GAPBOND_LOCAL_OOB_SC_DATA</td>
<td>Obsolete</td>
</tr>
<tr class="row-even"><td>GAPBOND STATE</td>
<td>GAPBOND_PAIRING_STATE_BONDED</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p_bond_mgr___events.html#gaac02ab0ff973831e6d151e0615d18cbc">GAPBOND_PAIRING_STATE_ENCRYPTED</a></td>
</tr>
<tr class="row-odd"><td>GAPBOND DEF</td>
<td>GBM_QUEUE_PAIRINGS</td>
<td>Removed, is now default behavior</td>
</tr>
<tr class="row-even"><td>GAPBOND DEF</td>
<td>GBM_GATT_NO_CLIENT</td>
<td>Configured by <code class="docutils literal notranslate"><span class="pre">GATT_NO_CLIENT</span></code></td>
</tr>
<tr class="row-odd"><td>GAPBOND DEF</td>
<td>SNP_SECURITY</td>
<td>Configured by <code class="docutils literal notranslate"><span class="pre">GAPBONDMGR_NO_SIGNING</span></code></td>
</tr>
<tr class="row-even"><td>GAPBOND API</td>
<td>GAPBondMgr_LinkEst</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
<tr class="row-odd"><td>GAPBOND API</td>
<td>GAPBondMgr_LinkTerm</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
<tr class="row-even"><td>GAPBOND API</td>
<td>GAPBondMgr_SlaveReqSecurity</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p_bond_mgr.html#ga15379572e5d31e014e84e5457d4b1633">GAPBondMgr_Pair()</a>, allowing both
masters and slaves to request pairing</td>
</tr>
<tr class="row-odd"><td>GAPBOND API</td>
<td>GAPBondMgr_UpdateCharCfg</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
<tr class="row-even"><td>GAPBOND API</td>
<td>GAPBondMgr_ReadGattChar</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
<tr class="row-odd"><td>GAPBOND API</td>
<td>GAPBondMgr_SupportsEnhancedPriv</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
<tr class="row-even"><td>GAPBOND API</td>
<td>GAPBondMgr_CheckNVLen</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
<tr class="row-odd"><td>GAPBOND API</td>
<td>GAPBondMgr_syncResolvingList</td>
<td>Removed Application Access to API
Handled Internally</td>
</tr>
</tbody>
</table>
<span id="tbl-ble5-porting-gapgattserver-changes-cc2640r2-to-cc26x2"></span><table border="1" class="docutils" id="id6">
<caption><span class="caption-number">Table 24. </span><span class="caption-text">GAP GATT Server Changes</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="14%" />
<col width="43%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Previous Implementation</th>
<th class="head">New/Current implementation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Type</td>
<td>Name</td>
<td>Description / API / Parameter</td>
</tr>
<tr class="row-odd"><td>GGS PARAM</td>
<td>GGS_PERI_PRIVACY_FLAG_ATT</td>
<td>Obsolete</td>
</tr>
<tr class="row-even"><td>GGS PARAM</td>
<td>GGS_RECONNCT_ADDR_ATT</td>
<td>Obsolete</td>
</tr>
<tr class="row-odd"><td>GGS PARAM</td>
<td>GGS_PERI_PRIVACY_FLAG_PROPS</td>
<td>Obsolete</td>
</tr>
<tr class="row-even"><td>GGS PARAM</td>
<td>GGS_W_PERMIT_PRIVACY_FLAG_ATT</td>
<td>Obsolete</td>
</tr>
<tr class="row-odd"><td>GGS PARAM</td>
<td>GGS_TESTMODE_W_PERMIT_PRIVACY_FLAG</td>
<td>Obsolete</td>
</tr>
</tbody>
</table>
<span id="tbl-ble5-porting-linkdb-changes-cc2640r2-to-cc26x2"></span><table border="1" class="docutils" id="id7">
<caption><span class="caption-number">Table 25. </span><span class="caption-text">Link Database Changes</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="40%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Previous Implementation</th>
<th class="head">New/Current implementation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Type</td>
<td>Name</td>
<td>Description / API / Parameter</td>
</tr>
<tr class="row-odd"><td>LinkDB API</td>
<td>linkDB_Remove</td>
<td>API now accepts
<a class="reference external" href="../../doxygen/ble/html/structlink_d_b_info__t.html">linkDBInfo_t</a> in
addition to connection handle</td>
</tr>
</tbody>
</table>
<span id="tbl-ble5-porting-sample-app-changes"></span><table border="1" class="docutils" id="id8">
<caption><span class="caption-number">Table 26. </span><span class="caption-text">Sample Simple Peripheral App Changes</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Previous Implementation</strong></th>
<th class="head"><strong>BLE5-Stack 1.02.00 Implementation</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SimpleBLEPeripheral_processStateChangeEvt</td>
<td>See <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processGapMessage</span></code></td>
</tr>
<tr class="row-odd"><td>SimpleBLEPeripheral_processAppMsg</td>
<td>Different events are now being handled. See <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processAppMsg</span></code></td>
</tr>
<tr class="row-even"><td>SimpleBLEPeripheral_processStackMsg</td>
<td><dl class="first last docutils">
<dt>See the guide’s step to <code class="docutils literal notranslate"><span class="pre">Replace</span> <span class="pre">GAP</span> <span class="pre">Event</span> <span class="pre">processing</span></code></dt>
<dd>This is modified to process <a class="reference external" href="../../doxygen/ble/html/bcomdef_8h.html#a53097c6e9dcd8791ab00c4adbd8d69cc">GAP_MSG_EVENT</a></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>SimpleBLEPeripheral_stateChangeCB
gapRolesCBs_t SimpleBLEPeripheral_gapRoleCBs</td>
<td><dl class="first last docutils">
<dt>See the guide’s step to <code class="docutils literal notranslate"><span class="pre">Replace</span> <span class="pre">GAP</span> <span class="pre">Event</span> <span class="pre">processing</span></code></dt>
<dd>This is no longer used. GAP events are now returned to the application
directly as the RTOS event, <a class="reference external" href="../../doxygen/ble/html/bcomdef_8h.html#a53097c6e9dcd8791ab00c4adbd8d69cc">GAP_MSG_EVENT</a></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>GAP_SetParamValue(TGAP_CONN_PAUSE_PERIPHERAL,
DEFAULT_CONN_PAUSE_PERIPHERAL)</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-odd"><td>GAPRole_SetParameter(GAPROLE_ADVERT_ENABLED,
sizeof(uint8_t),&amp;initialAdvertEnable)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processGapMessage</span></code> by <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a></td>
</tr>
<tr class="row-even"><td>GAPRole_SetParameter(GAPROLE_ADVERT_OFF_TIME,
sizeof(uint16_t),&amp;advertOffTime)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processGapMessage</span></code> by <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga9b94640e5689a2b2b800d70c1a55538b">GapAdv_enable()</a>.
Configured by the third parameter <code class="docutils literal notranslate"><span class="pre">durationOrMaxEvents</span></code></td>
</tr>
<tr class="row-odd"><td>GAPRole_SetParameter(GAPROLE_SCAN_RSP_DATA,
sizeof(scanRspData),scanRspData)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processGapMessage</span></code> by <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga1bbb75a51200d38ed8f760d274c8b8c0">GapAdv_loadByHandle()</a>.
with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___constants.html#gga481846f154fc6845b58a64d98f093b5babc42e2e33aabd615ea147453146b33a0">GAP_ADV_DATA_TYPE_SCAN_RSP</a> set as the data type</td>
</tr>
<tr class="row-even"><td>GAPRole_SetParameter(GAPROLE_ADVERT_DATA,
sizeof(advertData), advertData)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processGapMessage</span></code> by <a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga1bbb75a51200d38ed8f760d274c8b8c0">GapAdv_loadByHandle()</a>
with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___constants.html#gga481846f154fc6845b58a64d98f093b5baf3bd34ea7d975641e6ed144efbafc414">GAP_ADV_DATA_TYPE_ADV</a> set as the data type</td>
</tr>
<tr class="row-odd"><td>GAPRole_SetParameter(GAPROLE_PARAM_UPDATE_ENABLE,
sizeof(uint8_t), &amp;enableUpdateRequest)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processGapMessage</span></code>,
parameter updates from a central device are
handled in <a class="reference external" href="../../doxygen/ble/html/group___g_a_p___event___i_ds.html#gaede323cf41e04ee0fec404461a47ce17">GAP_UPDATE_LINK_PARAM_REQ_EVENT</a> and
uses <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaed1b6299bfe3b0469e2baf53cba04fe1">GAP_UpdateLinkParamReqReply()</a></td>
</tr>
<tr class="row-even"><td>GAPRole_SetParameter(GAPROLE_MIN_CONN_INTERVAL,
sizeof(uint16_t), &amp;desiredMinInterval)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processParamUpdate</span></code>,
set as <code class="docutils literal notranslate"><span class="pre">DEFAULT_DESIRED_MIN_CONN_INTERVAL</span></code>
and applied with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-odd"><td>GAPRole_SetParameter(GAPROLE_MAX_CONN_INTERVAL,
sizeof(uint16_t), &amp;desiredMaxInterval)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processParamUpdate</span></code>,
set as <code class="docutils literal notranslate"><span class="pre">DEFAULT_DESIRED_MAX_CONN_INTERVAL</span></code>
and applied with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-even"><td>GAPRole_SetParameter(GAPROLE_SLAVE_LATENCY,
sizeof(uint16_t), &amp;desiredSlaveLatency)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processParamUpdate</span></code>,
set as <code class="docutils literal notranslate"><span class="pre">DEFAULT_DESIRED_SLAVE_LATENCY</span></code>
and applied with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-odd"><td>GAPRole_SetParameter(GAPROLE_TIMEOUT_MULTIPLIER,
sizeof(uint16_t), &amp;desiredConnTimeout)</td>
<td>In <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_processParamUpdate</span></code>,
set as <code class="docutils literal notranslate"><span class="pre">DEFAULT_DESIRED_CONN_TIMEOUT</span></code>
and applied with <a class="reference external" href="../../doxygen/ble/html/group___g_a_p.html#gaad99f6598df0ee36c4cd2608afa09618">GAP_UpdateLinkParamReq()</a></td>
</tr>
<tr class="row-even"><td>GAP_SetParamValue(TGAP_LIM_DISC_ADV_INT_MIN,
advInt)
GAP_SetParamValue(TGAP_GEN_DISC_ADV_INT_MIN,
advInt)</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a>
with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa70e48f6d64e39e15360b854892163716">GAP_ADV_PARAM_PRIMARY_INTERVAL_MIN</a></td>
</tr>
<tr class="row-odd"><td>GAP_SetParamValue(TGAP_LIM_DISC_ADV_INT_MAX,
advInt)
GAP_SetParamValue(TGAP_GEN_DISC_ADV_INT_MAX,
advInt)</td>
<td><a class="reference external" href="../../doxygen/ble/html/group___gap_adv.html#ga65020be0895c76efdaf18cb6da791a60">GapAdv_setParam()</a>
with <a class="reference external" href="../../doxygen/ble/html/group___gap_adv___params.html#ggaa58afceb7db92df94b51adb77393744aa27bc46d1fbcc99ce9ed00d9b6ec47dca">GAP_ADV_PARAM_PRIMARY_INTERVAL_MAX</a></td>
</tr>
<tr class="row-even"><td>GAPBondMgr_SetParameter(GAPBOND_DEFAULT_PASSCODE,
sizeof(uint32_t), &amp;passkey)</td>
<td>Use <a class="reference external" href="../../doxygen/ble/html/group___g_a_p_bond_mgr___c_bs.html#ga0bce1fb086c4724f9447778cda3abda4">pfnPasscodeCB_t</a>,
shared default passcode defined in bcomdef.h
<a class="reference external" href="../../doxygen/ble/html/bcomdef_8h.html#a0da7af8bf24c0c6d0b23b2a36d13f53d">B_APP_DEFAULT_PASSCODE</a></td>
</tr>
<tr class="row-odd"><td>GAPROLE_STATE</td>
<td>Obsolete - GAP changes remove the need for this</td>
</tr>
<tr class="row-even"><td>GAPROLE_CONNHANDLE</td>
<td>Returned for each GAP event</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../cc2640/software-on-cc2640r2l.html" class="btn btn-neutral float-right" title="Running Software Examples on CC2640R2L" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ble5stack1.00.01-to-ble5stack1.01.00.html" class="btn btn-neutral float-left" title="BLE5-Stack 1.00.01 to BLE5-Stack 1.01.00" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">2010-2020, Texas Instruments</a>, Texas Instruments Incorporated. All rights reserved. <br>
        <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>