

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the AUX RAM as RAM &mdash; 
SimpleLink™ CC2640R2 SDK
User&#39;s Guide for BLE-Stack 3.x.x
 3.03.05.00 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview" href="../ble-stack-3.x/overview.html" />
    <link rel="prev" title="Using the Cache as RAM" href="cache-as-ram.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug ble-stack-common aux-as-ram";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for TI beyond RTD Sphinx Theme --->
<div class="DocSite-globalNav tiNav">
    <ul>
    </ul>
</div>

<a class="DocSite-nav" href="https://www.ti.com" style="padding-bottom: 85px;">
  <img class="DocSiteNav-logo"
    src="../_static/img/ti_logo.png"
    alt="TI Logo">
  <div class="DocSiteNav-title"></div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../ble-stack-3.x-guide/index.html" class="icon icon-home" alt="Documentation Home"> 
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x

          

          
          </a>

          
            
            
              <div class="version">
                3.03.05.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/platform.html">The CC2640R2 SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/tirtos-index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html">Application</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-3.x/the-application.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-3.x/the-application.html#main-initialization">Main initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-3.x/the-application.html#icall">ICall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-3.x/the-application.html#simple-peripheral-task">Simple Peripheral Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-3.x/the-application.html#intertask-messages">Intertask Messages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#memory-management">Memory Management</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="memory_map.html">Memory Map</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash_memory-cc2640.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_management.html">RAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_management.html#cache">Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_management.html#aux-ram">AUX RAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache-as-ram.html">Using the Cache as RAM</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the AUX RAM as RAM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-stack">BLE-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#developing-a-custom-application">Developing a Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-network-processor">BLE Network Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#running-the-sdk-on-custom-hardware">Running the SDK on Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/u-stack-index.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/index-oad-cc2640.html">Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../voice/voice.html">Creating a Voice Enabled Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/secure-fw-index.html">Secure Firmware (SFW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/migration.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/reference.html">Terms and Definitions</a></li>
</ul>

            
          
          <!-- extra nav elements for TI beyond RTD Sphinx Theme --->
<div id="sideBanner">
    <br/>
    <br/><br/><br/>
</div>
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../ble-stack-3.x-guide/index.html">
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x
</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../ble-stack-3.x-guide/index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../ble-stack-3.x-guide/ble-stack-3-index.html">Application</a> &raquo;</li>
        
      <li>Using the AUX RAM as RAM</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-aux-ram-as-ram">
<span id="using-the-aux-as-ram"></span><h1>Using the AUX RAM as RAM<a class="headerlink" href="#using-the-aux-ram-as-ram" title="Permalink to this headline">¶</a></h1>
<p>If your application does not use the Sensor Controller, you can use this memory as
RAM for your application. However, access to this memory is significantly slower
than access to the SRAM. This may lead to increased power consumption and
slower program execution. Additionally, if using the AUX RAM as RAM it is
important that you test <strong>thoroughly</strong>. Certain objects, when put in AUX RAM can
cause the application to crash. One should test for each object they want to
store in AUX RAM.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Sensor Controller is not available on the <a class="reference external" href="https://www.ti.com/product/CC2640R2L">CC2640R2L</a>, so the AUX RAM
can be used freely by the application.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The Application Processor (AP) can do other tasks while the data is being
transferred to AUX RAM, but if the bus buffer gets full during back2back
writes, it will stall the AP until there is free space in the buffer. After
you write a series of data to AUX RAM you should implement a singe read access
to make sure all the data has been written. The read access will stall the AP
until all the data has been transferred to AUX RAM.</p>
</div>
<p><strong>In order to use the AUX RAM with you application, follow these
steps (CCS is first described, then IAR).</strong></p>
<p>1. Make a new define in the linker command file predefines: In CCS;
Project -&gt; Properties -&gt; ARM Linker -&gt; Advanced Options -&gt; Command
File Preprocessing. In IAR; Options -&gt; Linker -&gt; Config. Add
<code class="docutils literal notranslate"><span class="pre">AUX_AS_RAM=1</span></code>.</p>
<p>2. The linker command/configuration files are somewhat different
from CCS to IAR. <strong>The instructions for altering the linker
configuration file in IAR follows the CCS specific explanations</strong>.</p>
<ul>
<li><p class="first">In the linker command file <code class="docutils literal notranslate"><span class="pre">cc26xx_app.cmd</span></code>, define the AUX_RAM
memory area:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ifdef AUX_AS_RAM
#define AUX_RAM_BASE            0x400E0000
#define AUX_RAM_SIZE            0x800
#endif /* AUX_AS_RAM */
</pre></div>
</div>
</li>
<li><p class="first">Create a AUX_RAM memory section in <code class="docutils literal notranslate"><span class="pre">MEMORY{}</span></code></p>
</li>
</ul>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ifdef AUX_AS_RAM
AUX_RAM (RWX) : origin = AUX_RAM_BASE, length = AUX_RAM_SIZE
#endif /* AUX_AS_RAM */
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p class="first">Add sections of memory or code to AUX_RAM in <code class="docutils literal notranslate"><span class="pre">SECTIONS{}</span></code></p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-number">Listing 40. </span><span class="caption-text">Move object files into AUX_RAM. Example from simple_peripheral (<code class="docutils literal notranslate"><span class="pre">cc26xx_app.cmd</span></code>).</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ifdef AUX_AS_RAM
  reorganized_into_auxram
  {
    simple_peripheral.obj(.data)
    devinfoservice.obj(.data)
    simple_gatt_profile.obj(.data)
    icall.obj(.data)
    board.obj(.bss)
    } &gt; AUX_RAM
#endif/* AUX_AS_RAM */
</pre></div>
</div>
</div>
</li>
</ul>
<p>The .obj files are listed in the FlashROM folder of the app project.
They are also listed with size in the .map file. A detailed
description of the linker command file and memory sections is given
in this article <a class="reference external" href="http://software-dl.ti.com/ccs/esd/documents/sdto_cgt_Linker-Command-File-Primer.html">Linker Command File Primer</a>.</p>
<p>If you want more control over what is stored in AUX_RAM, individual
variables can be stored there with the <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">DATA_SECTION</span></code> command.
Please note that this is only possible for global variables.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-number">Listing 41. </span><span class="caption-text">Move the global <em>display handle</em> variable into a new  AUX RAM section called <code class="docutils literal notranslate"><span class="pre">my_section</span></code>.</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Display Interface</span>
<span class="cp">#pragma DATA_SECTION(dispHandle, &quot;my_section&quot;)</span>
<span class="n">Display_Handle</span> <span class="n">dispHandle</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div></blockquote>
<p>You can find <code class="docutils literal notranslate"><span class="pre">my_section</span></code> in the map-file. Here you will find the names of the
objects included in <code class="docutils literal notranslate"><span class="pre">my_section</span></code>. In this case, the object is
<code class="docutils literal notranslate"><span class="pre">simple_peripheral.obj</span> <span class="pre">(my_section)</span></code>.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-number">Listing 42. </span><span class="caption-text">In the linker command file (<code class="docutils literal notranslate"><span class="pre">cc26xx_app.cmd</span></code>), add the section to AUX_RAM.</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ifdef AUX_AS_RAM
  reorganized_into_auxram
  {
    simple_peripheral.obj(my_section)
  } &gt; AUX_RAM
#endif /* AUX_AS_RAM */
</pre></div>
</div>
</div>
</div></blockquote>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">When making alterations only to the linker command file, please make sure to
press <em>Rebuild</em>, not just <em>Build</em>.
(CCS will not recognize that you have made changes to the project before you
press <em>Rebuild</em>.)</p>
</div>
<ol class="arabic simple" start="3">
<li><strong>For IAR</strong>, open the linker configuration file <code class="docutils literal notranslate"><span class="pre">cc26xx_app.icf</span></code>. Under <code class="docutils literal notranslate"><span class="pre">Memory</span> <span class="pre">Definitions</span></code>, add</li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>////////////////////////////////////////////////////////////////////////////////
// AUX_RAM
//
if ( isdefinedsymbol(AUX_AS_RAM) )
{
  define symbol AUX_RAM_START        = 0x400E0000;
  define symbol AUX_RAM_SIZE         = 0x800;
  define symbol AUX_RAM_END          = AUX_RAM_START + AUX_RAM_SIZE;
}
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p class="first">Under <code class="docutils literal notranslate"><span class="pre">Memory</span> <span class="pre">Regions</span></code>, add</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if ( isdefinedsymbol(AUX_AS_RAM) )
{
  define region AUX_RAM               = mem:[from AUX_RAM_START to AUX_RAM_END];
}
</pre></div>
</div>
</li>
<li><p class="first">Under <code class="docutils literal notranslate"><span class="pre">Memory</span> <span class="pre">Placement</span></code>, add</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-number">Listing 43. </span><span class="caption-text">Move object files into AUX_RAM. Example from simple_peripheral (<code class="docutils literal notranslate"><span class="pre">cc26xx_app.icf</span></code>).</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if ( isdefinedsymbol(AUX_AS_RAM) )
{
  // AUX_RAM
  define block AUXDATA { section .data object simple_peripheral.o,
                         section .data object devinfoservice.o,
                         section .data object simple_gatt_profile,
                         section .data object icall.o,
                         section .data object board.o};
  place in AUX_RAM { block AUXDATA };
}
</pre></div>
</div>
</div>
</li>
</ul>
<p>The .o-files are listed in the .map file. For more information on the linker
configuration file, please see <a class="reference external" href="http://ftp.iar.se/WWWfiles/arm/webic/doc/EWARM_DevelopmentGuide.ENU.pdf">IAR C/C++ Development Guide</a>.</p>
<p>If you want more control over what is stored in AUX_RAM, individual
variables can be stored there with the <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">location</span></code> command.
Please note that this is only possible for global variables.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-number">Listing 44. </span><span class="caption-text">Move the global <em>display handle</em> variable into a new Cache RAM section called <code class="docutils literal notranslate"><span class="pre">my_section</span></code>.</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Display Interface</span>
<span class="cp">#pragma location=&quot;my_section&quot;</span>
<span class="n">Display_Handle</span> <span class="n">dispHandle</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div></blockquote>
<p>You can find <code class="docutils literal notranslate"><span class="pre">my_section</span></code> in the map-file. Here you will find the names of the
objects included in <code class="docutils literal notranslate"><span class="pre">my_section</span></code>. In this case, the object is
<code class="docutils literal notranslate"><span class="pre">simple_peripheral.o</span> <span class="pre">(my_section)</span></code>.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-number">Listing 45. </span><span class="caption-text">In the linker configuration file (<code class="docutils literal notranslate"><span class="pre">cc26xx_app.cmd</span></code>), add the section to AUX_RAM.</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if ( isdefinedsymbol(AUX_AS_RAM) )
{
  // AUX_RAM
  define block AUXDATA { section my_section object simple_peripheral.o };
  place in AUX_RAM { block AUXDATA };
}
</pre></div>
</div>
</div>
</div></blockquote>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ble-stack-3.x/overview.html" class="btn btn-neutral float-right" title="Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cache-as-ram.html" class="btn btn-neutral float-left" title="Using the Cache as RAM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">2010-2020, Texas Instruments</a>, Texas Instruments Incorporated. All rights reserved. <br>
        <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>