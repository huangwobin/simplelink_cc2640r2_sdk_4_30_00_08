

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OAD Image Tool &mdash; 
SimpleLink™ CC2640R2 SDK
User&#39;s Guide for BLE-Stack 3.x.x
 3.03.05.00 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OAD Application" href="../ble3-stack-oad/oad-application.html" />
    <link rel="prev" title="Flash Layout for On-Chip OAD" href="flash-layout-on-chip-split-image.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug oad-secure tools";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for TI beyond RTD Sphinx Theme --->
<div class="DocSite-globalNav tiNav">
    <ul>
    </ul>
</div>

<a class="DocSite-nav" href="https://www.ti.com" style="padding-bottom: 85px;">
  <img class="DocSiteNav-logo"
    src="../_static/img/ti_logo.png"
    alt="TI Logo">
  <div class="DocSiteNav-title"></div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../ble-stack-3.x-guide/index.html" class="icon icon-home" alt="Documentation Home"> 
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x

          

          
          </a>

          
            
            
              <div class="version">
                3.03.05.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/platform.html">The CC2640R2 SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/tirtos-index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html">Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-stack">BLE-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#developing-a-custom-application">Developing a Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-network-processor">BLE Network Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#running-the-sdk-on-custom-hardware">Running the SDK on Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/u-stack-index.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ble-stack-3.x-guide/index-oad-cc2640.html">Over-the-Air Download (OAD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="oad-types.html">OAD Storage &amp; Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="bim.html">Boot Image Manager (BIM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="bim-off-chip.html">BIM for Off-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="bim-on-chip-split-image.html">BIM for On-Chip OAD (Split Image)</a></li>
<li class="toctree-l2"><a class="reference internal" href="image-header.html">OAD Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="ext-flash-image-header.html">OAD External Flash Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="flash-layout-off-chip.html">Flash Layout for Off-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="flash-layout-on-chip-split-image.html">Flash Layout for On-Chip OAD</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">OAD Image Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tool">Running the tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tool-from-source">Running the Tool from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-new-security-keys-embedded">Generating New Security Keys (Embedded)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#required-arguments-getting-help">Required Arguments/Getting Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ble3-stack-oad/oad-application.html">OAD Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble3-stack-oad/oad-profile.html">BLE-Stack OAD Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble3-stack-oad/setting-up-environment.html">Setting up the BLE OAD Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble3-stack-oad/performing-an-oad.html">Performing a BLE OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble3-stack-oad/creating-a-production-image.html">Creating a Production Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble3-stack-oad/add-ble-oad-to-proj.html">Adding BLE OAD to an Existing Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../voice/voice.html">Creating a Voice Enabled Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/secure-fw-index.html">Secure Firmware (SFW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/migration.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/reference.html">Terms and Definitions</a></li>
</ul>

            
          
          <!-- extra nav elements for TI beyond RTD Sphinx Theme --->
<div id="sideBanner">
    <br/>
    <br/><br/><br/>
</div>
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../ble-stack-3.x-guide/index.html">
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x
</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../ble-stack-3.x-guide/index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../ble-stack-3.x-guide/index-oad-cc2640.html">Over-the-Air Download (OAD)</a> &raquo;</li>
        
      <li>OAD Image Tool</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="oad-image-tool">
<span id="sec-generating-image-header-vector"></span><span id="sec-oad-tools"></span><h1>OAD Image Tool<a class="headerlink" href="#oad-image-tool" title="Permalink to this headline">¶</a></h1>
<p>The OAD image tool is a script written in python that is intended to process
the compiler output in the form of a hex file and prepare the image for over the
air transfer.</p>
<p>The major components of the oad_image_tool include:</p>
<blockquote>
<div><ul class="simple">
<li>Conversion from *.hex to *.bin</li>
<li>Padding the image to be word aligned</li>
<li>Calculating the CRC and embedding it in the image header</li>
<li>Optional: Merging a split image into a single app + stack image</li>
<li>Optional: Adding security info to the image header if present</li>
</ul>
</div></blockquote>
<p>The tool is automatically invoked by the OAD enabled projects in the SDK as a
post build step. For sample invocations refer to the post build steps on these
projects</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">OAD Image Tool does not support non-executable types.</p>
</div>
<div class="section" id="running-the-tool">
<h2>Running the tool<a class="headerlink" href="#running-the-tool" title="Permalink to this headline">¶</a></h2>
<p>The OAD Image Tool is distributed in both source and binary form. The correct
binary will be bundled with the installer for a given platform (i.e. Linux,
Windows, Mac). However, the tool can also be run in source if desired.</p>
<p>The tool is intended to run as a post build step to an OAD application.  When
run as a post build step, the tool will generate an output binary file named
<code class="docutils literal notranslate"><span class="pre">&lt;app_name&gt;_oad.bin</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;app_name&gt;</span></code> is the name and path specified by
the required <code class="docutils literal notranslate"><span class="pre">-o</span></code> argument to the script.</p>
<p>It is recommended to use the OAD enabled example application from the intended
protocol stack component of the <a class="reference external" href="http://www.ti.com/tool/SIMPLELINK-CC2640R2-SDK">SimpleLink CC2640R2 SDK</a> and copy + modify the post build step as
needed.</p>
</div>
<div class="section" id="running-the-tool-from-source">
<h2>Running the Tool from Source<a class="headerlink" href="#running-the-tool-from-source" title="Permalink to this headline">¶</a></h2>
<p>In general, it is recommended to invoke the tool via the binaries distributed
with the <a class="reference external" href="http://www.ti.com/tool/SIMPLELINK-CC2640R2-SDK">SimpleLink CC2640R2 SDK</a>. However if it is required to run the tool in source, the
following steps should be taken:</p>
<blockquote>
<div><ul class="simple">
<li>Ensure Python is installed on the system (Python 3 recommended)</li>
<li>Install the required packages via pip (see <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> in the
same folder as the tool)</li>
</ul>
</div></blockquote>
<p>The tool project is located in <code class="docutils literal notranslate"><span class="pre">&lt;SDK_DIR&gt;/tools/common/oad</span></code></p>
</div>
<div class="section" id="generating-new-security-keys-embedded">
<span id="sec-gen-security-keys"></span><h2>Generating New Security Keys (Embedded)<a class="headerlink" href="#generating-new-security-keys-embedded" title="Permalink to this headline">¶</a></h2>
<p>By default, public and private keys will be provided in the <code class="docutils literal notranslate"><span class="pre">private.pem</span></code>
and <code class="docutils literal notranslate"><span class="pre">public.pem</span></code> files. The private key will be used by the OAD image tool to
sign the application image before outputting the binary. The path to the private
key must be provided if using using security, this is provided using the <code class="docutils literal notranslate"><span class="pre">-k</span></code>
option. You must be using the secure version of the tool to do this.</p>
<p>The default keys are also installed in the BIM projects in order for the out of
box demos to work.</p>
<p>However, before production it is recommended that the customer generate new
keys using the process detailed below:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">key_generate.py</span></code> script requires use of Python 3.7 to behave as expected.</p>
</div>
<ol class="arabic simple">
<li>Generate a new key pair by calling <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">keys/key_generate.py</span></code> from
within the OAD tool folder. This will override the existing <code class="docutils literal notranslate"><span class="pre">private.pem</span></code>
<code class="docutils literal notranslate"><span class="pre">public.pem</span></code>, and <code class="docutils literal notranslate"><span class="pre">key_info.txt</span></code> files.</li>
<li>Replace the keys used by the BIM with the new ones generated by the tool.
The code snippet below shows how to do this.
Replace the “NEW ** HERE” placeholders below with the contents of
the appropriate line in the <code class="docutils literal notranslate"><span class="pre">key_info.txt</span></code> file.</li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="p">.</span><span class="n">version</span>    <span class="o">=</span> <span class="n">SECURE_SIGN_TYPE</span><span class="p">,</span>
    <span class="p">.</span><span class="n">len</span>        <span class="o">=</span> <span class="n">SECURE_CERT_LENGTH</span><span class="p">,</span>
    <span class="p">.</span><span class="n">options</span>    <span class="o">=</span> <span class="n">SECURE_CERT_OPTIONS</span><span class="p">,</span>
    <span class="p">.</span><span class="n">signerInfo</span> <span class="o">=</span> <span class="p">{</span><span class="cm">/* NEW SIGNER INFO HERE */</span><span class="p">},</span>
    <span class="p">.</span><span class="n">certPayload</span><span class="p">.</span><span class="n">eccKey</span><span class="p">.</span><span class="n">pubKeyX</span> <span class="o">=</span> <span class="p">{</span><span class="cm">/* NEW PUB KEY X HERE */</span><span class="p">},</span>
    <span class="p">.</span><span class="n">certPayload</span><span class="p">.</span><span class="n">eccKey</span><span class="p">.</span><span class="n">pubKeyY</span> <span class="o">=</span> <span class="p">{</span><span class="cm">/* NEW PUB KEY Y HERE */</span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>The structure above can be found in the following file:</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="37%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">CC2640R2F</th>
<th class="head">CC13x2 / CC26x2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Off-chip OAD</td>
<td><code class="docutils literal notranslate"><span class="pre">bim_main.c</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">bim_main.c</span></code></td>
</tr>
<tr class="row-odd"><td>On-chip OAD</td>
<td><code class="docutils literal notranslate"><span class="pre">bim_onchip.c</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">bim_main.c</span></code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will need to add proper C style syntax to the key arrays when pasting
them into the BIM files. Be sure to add a comma between each element and
prepends all hex values with <code class="docutils literal notranslate"><span class="pre">0x</span></code>. Refer to the placeholder keys for
more information.</p>
</div>
</div>
<div class="section" id="required-arguments-getting-help">
<h2>Required Arguments/Getting Help<a class="headerlink" href="#required-arguments-getting-help" title="Permalink to this headline">¶</a></h2>
<p>If help is needed when running the tool, invoke it with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option which
will describe the supported features of the tool, the arguments and the actions
they perform.  Usage is as follows:</p>
<pre class="literal-block">
python oad_image_tool.py -h
usage: oad_image_tool [-h] [-v] [-verbose] [-hex1 HEXPATH1] [-bdf BDFILEPATH]
                      [-hex2 [HEXPATH2]] [-k [KEYFILE]] -o OUTPUT
                      ProjType ProjDir BinaryType

OAD Hex to Binary Converter version

positional arguments:
  ProjType              Target project Type: (iar/ccs)
  ProjDir               Target project directory
  BinaryType            Persistent App = 0, Application = 1, Stack = 2,
                        Application + Stack Combined = 3, Application + Stack
                        Merged = 7

optional arguments:
  -h, --help            show this help message and exit
  -v, --version         show program's version number and exit
  -verbose, --verbose
  -hex1 HEXPATH1, --HexPath1 HEXPATH1
                        First .hex file path (app/stack)
  -bdf BDFILEPATH, --bdFilePath BDFILEPATH
                        Boundary file path
  -hex2 [HEXPATH2], --HexPath2 [HEXPATH2]
                        Second .hex file name (app/stack)
  -k [KEYFILE], --keyFile [KEYFILE]
                        Provide the location of the file containing your
                        private key
  -o OUTPUT, --output OUTPUT
                        Path and filename of output file(s) without extension
</pre>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ble3-stack-oad/oad-application.html" class="btn btn-neutral float-right" title="OAD Application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flash-layout-on-chip-split-image.html" class="btn btn-neutral float-left" title="Flash Layout for On-Chip OAD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">2010-2020, Texas Instruments</a>, Texas Instruments Incorporated. All rights reserved. <br>
        <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>