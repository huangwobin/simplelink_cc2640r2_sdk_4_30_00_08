

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a Production Image &mdash; 
SimpleLink™ CC2640R2 SDK
User&#39;s Guide for BLE-Stack 3.x.x
 3.03.05.00 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Adding BLE OAD to an Existing Project" href="add-ble-oad-to-proj.html" />
    <link rel="prev" title="Performing a BLE OAD" href="performing-an-oad.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug ble3-stack-oad creating-a-production-image";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for TI beyond RTD Sphinx Theme --->
<div class="DocSite-globalNav tiNav">
    <ul>
    </ul>
</div>

<a class="DocSite-nav" href="https://www.ti.com" style="padding-bottom: 85px;">
  <img class="DocSiteNav-logo"
    src="../_static/img/ti_logo.png"
    alt="TI Logo">
  <div class="DocSiteNav-title"></div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../ble-stack-3.x-guide/index.html" class="icon icon-home" alt="Documentation Home"> 
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x

          

          
          </a>

          
            
            
              <div class="version">
                3.03.05.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/get-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/platform.html">The CC2640R2 SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/tirtos-index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html">Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-stack">BLE-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#developing-a-custom-application">Developing a Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-network-processor">BLE Network Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#running-the-sdk-on-custom-hardware">Running the SDK on Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/u-stack-index.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ble-stack-3.x-guide/index-oad-cc2640.html">Over-the-Air Download (OAD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/oad-types.html">OAD Storage &amp; Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/bim.html">Boot Image Manager (BIM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/bim-off-chip.html">BIM for Off-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/bim-on-chip-split-image.html">BIM for On-Chip OAD (Split Image)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/image-header.html">OAD Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/ext-flash-image-header.html">OAD External Flash Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/flash-layout-off-chip.html">Flash Layout for Off-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/flash-layout-on-chip-split-image.html">Flash Layout for On-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-secure/tools.html">OAD Image Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="oad-application.html">OAD Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="oad-profile.html">BLE-Stack OAD Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="setting-up-environment.html">Setting up the BLE OAD Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="performing-an-oad.html">Performing a BLE OAD</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating a Production Image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#disable-debug-define-in-project-setting">Disable DEBUG Define in Project Setting.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-trim">Device Trim</a></li>
<li class="toctree-l3"><a class="reference internal" href="#secure-oad-change-default-keys">Secure OAD: Change default keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-merged-production-image">Create Merged Production Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-a-production-image">Loading a Production Image</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="add-ble-oad-to-proj.html">Adding BLE OAD to an Existing Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../voice/voice.html">Creating a Voice Enabled Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/secure-fw-index.html">Secure Firmware (SFW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/migration.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/reference.html">Terms and Definitions</a></li>
</ul>

            
          
          <!-- extra nav elements for TI beyond RTD Sphinx Theme --->
<div id="sideBanner">
    <br/>
    <br/><br/><br/>
</div>
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../ble-stack-3.x-guide/index.html">
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x
</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../ble-stack-3.x-guide/index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../ble-stack-3.x-guide/index-oad-cc2640.html">Over-the-Air Download (OAD)</a> &raquo;</li>
        
      <li>Creating a Production Image</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-production-image">
<span id="sec-ble-oad-creating-an-image"></span><h1>Creating a Production Image<a class="headerlink" href="#creating-a-production-image" title="Permalink to this headline">¶</a></h1>
<p>A production image is an image that is ready for flashing at the factory, and to
be released in a commercial OAD enabled product.</p>
<div class="section" id="disable-debug-define-in-project-setting">
<h2>Disable DEBUG Define in Project Setting.<a class="headerlink" href="#disable-debug-define-in-project-setting" title="Permalink to this headline">¶</a></h2>
<p>By default, the DEBUG feature in the BIM is disabled. This can be enabled
during development and for evaluation of the TI OAD solution, but is not
recommended for a production OAD build as it will bypass CRC checks on the
application image.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> is defined in the Compiler Predefined Symbols (Project Settings -&gt;
Build -&gt; ARM Compiler -&gt; Predefined Symbols) the Off-Chip BIM  will not check
the CRC of the image before booting. This removes a layer of redundancy in the
system in favor of allowing the developer to load an OAD image straight from the
IDE. The On-Chip OAD BIM does not skip the CRC check, but if the application is
loaded directly from the IDE with invalid CRC in the header, the BIM will on
boot invalidate the crc status (crcstat = CRC_INVALID) and jump into the
persistent application.</p>
<p>In order to disable the debug fatures in the BIM, disable the DEBUG define:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">xDEBUG</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="device-trim">
<h2>Device Trim<a class="headerlink" href="#device-trim" title="Permalink to this headline">¶</a></h2>
<p>It may be desirable to remove the secondary device trim in the
application for production images. See <a class="reference internal" href="../oad-secure/bim.html#sec-oad-bim-trim"><span class="std std-ref">Device trim</span></a> for more
information.</p>
</div>
<div class="section" id="secure-oad-change-default-keys">
<h2>Secure OAD: Change default keys<a class="headerlink" href="#secure-oad-change-default-keys" title="Permalink to this headline">¶</a></h2>
<p>If you are using the secure version of OAD, new OAD keys should be generated
and stored on the device. It is a security risk to use the placeholder keys that
are provided with TI as these are publically available.</p>
<p>See <a class="reference internal" href="../oad-secure/tools.html#sec-gen-security-keys"><span class="std std-ref">Generating New Security Keys (Embedded)</span></a> for more information on how to generate and
install new keys on the device. If using unsecure OAD, this step is not
necessary.</p>
</div>
<div class="section" id="create-merged-production-image">
<span id="sec-loading-a-release-image"></span><h2>Create Merged Production Image<a class="headerlink" href="#create-merged-production-image" title="Permalink to this headline">¶</a></h2>
<p>Please refer to Task 4 – Bonus: Creating a Production Image in
<a class="reference external" href="http://dev.ti.com/tirex/#/?link=Software%2FSimpleLink%20CC2640R2%20SDK">SimpleLink Academy Enhanced OAD Module for SimpleLink CC2640R2 SDK</a> to learn
how to creata a merged production image that contain BIM, Application, Stack
and the Persistent Application (On-chip only).</p>
</div>
<div class="section" id="loading-a-production-image">
<h2>Loading a Production Image<a class="headerlink" href="#loading-a-production-image" title="Permalink to this headline">¶</a></h2>
<p>Images loaded straight from the IDE will not have a valid
CRC or signature. However, the oad_image_tool will add the CRC
and signature automatically at the completion of each build. Refer to
<a class="reference internal" href="../oad-secure/intro.html#fig-oad-downloader-and-target"><span class="std std-numref">Figure 91.</span></a> for a diagram of the build process.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If flashing the BIM image (or a merged image containing BIM) using uniflash,
be sure that the <code class="docutils literal notranslate"><span class="pre">Keep</span> <span class="pre">CCFG</span> <span class="pre">data</span></code> box is not checked. (Settings &amp;
Utilities –&gt; Download). BIM will use a custom CCFG, so it is important that
any existing image on the device is removed. Another safeguard is the mass
erase the device before starting with OAD.</p>
</div>
<p>It is necessary to load the device using the <code class="docutils literal notranslate"><span class="pre">*_oad.bin</span></code> application file
that is output by the oad_image_tool using UNIFLASH.</p>
<blockquote>
<div><ul class="simple">
<li>The binary from the tool will be placed in the build folder alongside the
default <code class="docutils literal notranslate"><span class="pre">.out</span></code> file.</li>
</ul>
</div></blockquote>
<p>The address offset should be 0x0000000 as shown in the screen capture below</p>
<blockquote>
<div><div class="figure align-center" id="fig-uniflash-load-production-image">
<img alt="../_images/uniflash_load_production_image.png" src="../_images/uniflash_load_production_image.png" />
</div>
</div></blockquote>
<p>Note the following error is benign and can be ignored for OAD images. Verify the
device has booted correctly by verifying the terminal output.</p>
<blockquote>
<div><div class="figure align-center" id="fig-uniflash-benign-error-oad">
<img alt="../_images/uniflash_benign_error_oad.png" src="../_images/uniflash_benign_error_oad.png" />
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="add-ble-oad-to-proj.html" class="btn btn-neutral float-right" title="Adding BLE OAD to an Existing Project" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="performing-an-oad.html" class="btn btn-neutral float-left" title="Performing a BLE OAD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">2010-2020, Texas Instruments</a>, Texas Instruments Incorporated. All rights reserved. <br>
        <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>